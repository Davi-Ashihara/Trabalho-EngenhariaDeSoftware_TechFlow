<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechFlow - Painel de Tarefas</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: #222; color: #eee; margin: 2rem; }
        h1 { color: #4e9af1; }
        ul { list-style: none; padding: 0; }
        li { background: #333; padding: 10px; margin-bottom: 8px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        input { padding: 8px; border-radius: 4px; border: 1px solid #555; background: #444; color: #eee; }
        button { padding: 8px 12px; background: #4e9af1; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #3a75bb; }
    </style>
</head>
<body>

    <h1>Painel de Tarefas</h1>
    
    <div id="add-task-form">
        <input type="text" id="task-title" placeholder="O que precisa ser feito?"/>
        <button id="add-button">Adicionar Tarefa</button>
    </div>

    <h2>Minhas Tarefas</h2>
    <ul id="task-list">
        </ul>

    <script>
        //url do backend
        const API_URL = 'http://localhost:8080/api/tasks';

        // Carregar tarefas do backend
        async function loadTasks() {
            // Chamar o seu endpoint GET /api/tasks
            const response = await fetch(API_URL);
            const tasks = await response.json(); // Converte o '[]' em dados

            const taskListElement = document.getElementById('task-list');
            taskListElement.innerHTML = ''; // Limpa a lista antes de adicionar

            // Criar um item na lista (li) para cada tarefa
            tasks.forEach(task => {
                const li = document.createElement('li');
                li.textContent = `${task.title} (Status: ${task.status})`;
                taskListElement.appendChild(li);
            });
        }

        // Criar uma nova tarefa
        async function createTask() {
            const titleInput = document.getElementById('task-title');
            const newTitle = titleInput.value;

            if (!newTitle) { // Não faz nada se o título estiver vazio
                alert("Por favor, digite um título.");
                return;
            }

            // Chamar o seu endpoint POST /api/tasks
            await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ title: newTitle }) // Envia { "title": "..." }
            });

            // Recarregar a lista e limpar o input
            titleInput.value = ''; // Limpa o campo
            loadTasks(); // Atualiza a lista com a nova tarefa
        }

        // Quando a página carregar, chame a função loadTasks()
        document.addEventListener('DOMContentLoaded', loadTasks);

        // Quando o botão "Adicionar" for clicado, chame a função createTask()
        document.getElementById('add-button').addEventListener('click', createTask);

    </script>
</body>
</html>